-- Quicksort

function qsort
    with [] do
        return [].
    orwith [a] do
        return [a].
    orwith [pivot|rest] do -- head-tail operator
        let less=[].
        let more=[].
        for e in rest do
            if e < pivot do
                let less = less + [e].
            else do
                let more = more + [e].
            end
        end

        return qsort less + [pivot] + qsort more.
    end

assert(qsort [3,2,1,0] == [0,1,2,3]).
